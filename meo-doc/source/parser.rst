===================================================
Полуавтоматический перенос курсов :sup:`[parser]`
===================================================

Программа проходит по всем .html файлам в выбранных занятиях, отыскаивает все ссылки ведущие на старую систему Canvas, определяет тип страницы, заголовки и пути, ищет соответствия id в новой LMS системе и заменяет ссылки на соответствующий JavaScript код. Результат описывается в папке res в файле #_log.html

.. hint:: Программа работает с несколькими занятиями, но в пределах **одного** курса, так как дополнительные файлы скачиваются отдельно для каждого курса.

Скачивание
---------------

Для скачивания программы нажмите `[здесь] <_static/codes/parser.rar>`_

Если скачивания не произошло или архив оказался битым, то скачать утилиту можно следующим способом: 

Зайти в репозиторий `[parser] <https://github.com/remasik/parser>`_

Вам потребуется два файла: **parser.py**.

Скачать его можно кликнув нему левой кнопкой мыши, на октырвшемся файле нажать кнопку **Raw** и комбинацией **ctrl+s** сохранить файл в какой-нибудь папке. 

.. hint:: Скриншоты представлены для утилиты csv_encoder. Так как набор действий одинаков, скриншоты решено оставить.

.. warning:: Будьте внимательны, на скриншотах присутствуют **два** файла, тогда как для этой программы нужен только один **parser.py**.

.. figure:: _static/images/1.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст


.. figure:: _static/images/2.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст


.. figure:: _static/images/3.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст


.. figure:: _static/images/4.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст



Установка
---------------

Для работы приложения требуется установленный Python 2.7.x.

Если его нет, то заходим на `[официальный сайт] <https://www.python.org/downloads/>`_ . Скачиваем текущую версию Python 2.7.x

.. warning:: Убедитесь, что скачиваете Python версии **2**, а не **3**

После загрузки запускаем установщик и следуем инструкции.

.. hint:: В установщике возможно нужно будет выбрать **Выборочная установка** или **Custom**, для того, чтобы указать путь установки.

.. warning:: Важно, чтобы путь установки был в корень диска С, то есть путь должен выглядеть так: **C:\\Python27**. Если вы не уверены, что сможете это сделать, позовите того, кто сможет. 

Следующим шагом необходимо скачать модифицированный Python `[здесь] <_static/codes/Python27.rar>`_, распаковать его и слить с оригинальным.

Для этого нужно открыть файловый менеджер и зайти в корень диска **C:\\**. 

.. hint:: Зайти в Пуск -> Компьютер -> Локальный диск (C:)

Архив **Python27.rar** распаковываем на рабочий стол.

После чего перетащить распакованную папку **Python27** в корень диска **C:\\** и на все предложения о замене файлов и слиянии папок нужно **согласиться**, предварительно поставив галочки типа *сделать это для всех файлов и папок*, чтобы компьютер сделал слияние сам.

Использование
---------------

Подготовка программы. 

Прежде чем запускать необходимо скачать дополнительные файлы содержащие все задания с открытым ответом и тесты для курса, который мы будем обрабатывать.

Например курс Русский язык(полный) 5 класс.

Заходим на страницу курса.

.. figure:: _static/images/course1.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст

Открываем поочередно страницы **тесты** и **задания с открытым ответом** и нажимаем комбинацию клавиш **CTRL+S**, после чего сохраняем страницы на **рабочий стол** с именем **q.html для тестов** и **d.html для задания с открытым ответом**.

.. figure:: _static/images/courses2.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст

.. figure:: _static/images/courses3.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст

.. warning:: Очень важно сохранить обе странички на рабочий стол именно с этими названиями, чтобы в программе потом указать путь до них.

.. figure:: _static/images/courses4.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст

.. figure:: _static/images/courses5.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст

Для запуска утилиты необходимо запустить **IDLE (Python GUI)**. 

.. hint:: Для этого нажмите Пуск -> Все программы -> Python27 -> IDLE (Python GUI).

В открывшемся окне нажмите **File -> open -> выберите скачанный файл parser.py**. Теперь необходимо указать пути до скачанных файлов **d.html** и **q.html**, как показано на рисунке.

.. figure:: _static/images/parser2.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст

.. warning:: Путь до рабочего стола на каждом компьютере отличается. В моем случае имя пользователя **PK-DPI-742**, у вас оно будет отличаться

Далее необходимо добавить нужные пути для обработки как показано на рисунке.

.. figure:: _static/images/parser.png
       :scale: 300 %
       :align: center
       :alt: Альтернативный текст

.. warning:: Символом # описываются комментарии, то есть строки, которые не будут учитываться при работе программы.

После того как добавили необходимые пути, нажимайте **Run -> Run module** и солашайтесь, когда он предложит сохранить изменения проделанные в файле.

Программа начнет долго обрабатывать файлы выводя информацию в консоль. Так же все это будет продублировано в виде лог файла формата .html в папке res каждого указанного для обработки занятия.

Ошибки
---------------

В случае появления ошибок рекомендуется обратится к разработчику. Если ошибка появится в диалоговом окне с надписью, что ее необходимо отправить разработчику, то текст ошибки можно просто отправить по электронной почте или в скайп. В случае же, если программа просто не открывается или ведет себя странно и ничего не делает, лучше обратится к разработчику.

.. hint:: Контактные данные разработчика находятся на главной странице. Для того, чтобы перейти туда, необходимо кликнуть на лого в верхнем левом углу.
